(function(e){function t(t){for(var s,r,o=t[0],c=t[1],l=t[2],g=0,u=[];g<o.length;g++)r=o[g],n[r]&&u.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(u.length)u.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,r=1;r<i.length;r++){var o=i[r];0!==n[o]&&(s=!1)}s&&(a.splice(t--,1),e=c(c.s=i[0]))}return e}var s={},r={app:0},n={app:0},a=[];function o(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"ab718731"}[e]+".js"}function c(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.e=function(e){var t=[],i={about:1};r[e]?t.push(r[e]):0!==r[e]&&i[e]&&t.push(r[e]=new Promise(function(t,i){for(var s="css/"+({about:"about"}[e]||e)+"."+{about:"0e433876"}[e]+".css",n=c.p+s,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var l=a[o],g=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(g===s||g===n))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){l=u[o],g=l.getAttribute("data-href");if(g===s||g===n)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var s=t&&t.target&&t.target.src||n,a=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");a.request=s,delete r[e],d.parentNode.removeChild(d),i(a)},d.href=n;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){r[e]=0}));var s=n[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise(function(t,i){s=n[e]=[t,i]});t.push(s[2]=a);var l,g=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e),l=function(t){u.onerror=u.onload=null,clearTimeout(d);var i=n[e];if(0!==i){if(i){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+s+": "+r+")");a.type=s,a.request=r,i[1](a)}n[e]=void 0}};var d=setTimeout(function(){l({type:"timeout",target:u})},12e4);u.onerror=u.onload=l,g.appendChild(u)}return Promise.all(t)},c.m=e,c.c=s,c.d=function(e,t,i){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(i,s,function(t){return e[t]}.bind(null,s));return i},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],g=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=g;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"0994":function(e,t,i){"use strict";var s=i("d86b"),r=i.n(s);r.a},"0b18":function(e,t,i){},"29c5":function(e,t,i){},"2a52":function(e,t,i){},"2e30":function(e,t,i){"use strict";var s=i("bd0f"),r=i.n(s);r.a},"305f":function(e,t,i){},"344b":function(e,t,i){"use strict";var s=i("8556"),r=i.n(s);r.a},3956:function(e,t,i){"use strict";var s=i("305f"),r=i.n(s);r.a},3958:function(e,t,i){"use strict";var s=i("b764"),r=i.n(s);r.a},"3ad5":function(e,t,i){"use strict";var s=i("afaf"),r=i.n(s);r.a},4939:function(e,t,i){},"4b6d":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("097d");var s=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("user-msg",{attrs:{msg:e.msg}}),i("home-nav"),e.isLoading?i("div",{staticClass:"loader"}):i("router-view")],1)},n=[],a=(i("6762"),i("2fdb"),i("b54a"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("div",{staticClass:"home-nav"},[i("div",{staticClass:"nav-logo-container"},[i("router-link",{staticClass:"home-logo",attrs:{to:"/"}},[i("h1",[e._v("\n          Gig\n          "),i("span",[e._v("It")])])])],1),i("div",{staticClass:"nav-seperator"},[i("div",{staticClass:"nav-user-container"},[e.isLoggedin?i("a",{staticClass:"nav-user-menu-container",on:{click:function(t){e.dropdownOpen=!e.dropdownOpen}}},[i("img",{attrs:{src:e.user.img}}),i("span",[e._v(e._s(e.user.name.first))]),i("div",{staticClass:"user-dropdown",class:e.dropdownStatus},[i("router-link",{attrs:{to:e.profileLink}},[i("i",{staticClass:"fas fa-address-card"}),e._v("Profile\n            ")]),i("a",{on:{click:e.doLogout}},[i("i",{staticClass:"fas fa-power-off"}),e._v("Log Out\n            ")])],1)]):i("router-link",{staticClass:"nav-guest-container",attrs:{to:"/user/login"}},[i("h1",[i("i",{staticClass:"fas fa-user"}),i("span",[e._v("Login")])])])],1),i("router-link",{attrs:{to:e.isLoggedin?e.inboxLink:"/user/login"}},[i("h1",[e.unreadMsg?i("i",{staticClass:"fas fa-envelope-open-text"}):i("i",{staticClass:"fas fa-envelope"})])]),i("router-link",{attrs:{to:"/about"}},[i("h1",[i("i",{staticClass:"far fa-question-circle"})])])],1)])])}),o=[],c={name:"homeNav",data:function(){return{dropdownOpen:!1}},computed:{user:function(){return this.$store.getters.user?this.$store.getters.user:{}},isLoggedin:function(){return this.$store.getters.isLoggedin},unreadMsg:function(){return this.user.isInboxRead},profileLink:function(){return"/user/".concat(this.user._id)},myGigsLink:function(){return"/user/".concat(this.user._id,"/gigs")},inboxLink:function(){return"/user/".concat(this.user._id,"/inbox")},dropdownStatus:function(){return{open:this.dropdownOpen,closed:!this.dropdownOpen}}},methods:{doLogout:function(){this.$store.dispatch({type:"doLogout"}),this.$router.push("/")}}},l=c,g=(i("2e30"),i("2877")),u=Object(g["a"])(l,a,o,!1,null,null,null);u.options.__file="homeNav.cmp.vue";var d=u.exports,p="usr-msg-display",h=new s["default"],f=h,m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.msg?i("section",{staticClass:"user-msg-container",class:e.msg.type,on:{click:e.goToLink}},[i("div",{staticClass:"user-msg",on:{click:e.goToLink}},[i("h5",[e._v(e._s(e.msg.txt))])]),e.msg.gigsterImg?i("div",{staticClass:"user-msg-img"},[i("img",{attrs:{src:e.msg.gigsterImg}})]):e._e()]):e._e()},v=[],b={props:["msg"],data:function(){return{}},methods:{goToLink:function(){if(this.msg){var e=this.msg.link;e&&this.$router.push(e)}}}},y=b,_=(i("8190"),Object(g["a"])(y,m,v,!1,null,null,null));_.options.__file="user-msgs.vue";var C=_.exports,w={data:function(){return{msg:"",showMsg:!1}},computed:{isLoading:function(){return this.$store.getters.isLoading},user:function(){return this.$store.getters.user}},methods:{displayMsg:function(e){var t=this;this.msg=e,this.showMsg=!0;var i=e.link?5e3:3e3;setTimeout(function(){t.msg=null,t.showMsg=!1},i)}},sockets:{eventMsgToUser:function(e){var t=new Audio("https://res.cloudinary.com/barpel/video/upload/v1544023238/GigIt%20Sounds/notification.mp3");t.play(),this.displayMsg(e)},emitChatMsgToUser:function(e){var t=this.$route.path;if(!t.includes("inbox")){var i=new Audio("https://res.cloudinary.com/barpel/video/upload/v1544023238/GigIt%20Sounds/notification.mp3");i.play(),this.displayMsg(e),this.user.isInboxRead=!1}}},created:function(){var e=this;this.$store.dispatch("openUserSocket"),this.$store.dispatch({type:"checkLoggedUser"}),f.$on(p,function(t){return e.displayMsg(t)})},components:{homeNav:d,userMsg:C}},k=w,I=(i("6294"),Object(g["a"])(k,r,n,!1,null,null,null));I.options.__file="app.vue";var G=I.exports,$=i("8c4f"),P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[i("div",{staticClass:"banner"},[i("div",{staticClass:"banner-block"},[i("el-carousel",{attrs:{trigger:"click",interval:7e3}},e._l(e.carouselObjs,function(t,s){return i("el-carousel-item",{key:s},[i("h3",[e._v(e._s(t.txt))]),i("img",{attrs:{src:t.imgUrl}}),i("h4",[e._v("Gig\n            "),i("span",[e._v("It")])])])}))],1)]),i("hr",{staticClass:"hr1"}),i("div",{staticClass:"cover-container"},[e._m(0),i("div",{staticClass:"search-categories-container"},[i("div",{staticClass:"search-container"},[i("router-link",{attrs:{to:"/gig/edit",tag:"button"}},[i("i",{staticClass:"fas fa-plus"}),i("span",[e._v("Gig")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.filter.byTitle,expression:"filter.byTitle"}],ref:"searchGig",attrs:{type:"text",placeholder:"Find your next Gig"},domProps:{value:e.filter.byTitle},on:{input:[function(t){t.target.composing||e.$set(e.filter,"byTitle",t.target.value)},e.filterByKey]}}),i("button",{on:{click:e.focusOnSearch}},[i("i",{staticClass:"fas fa-search"})])],1),i("gig-toolbar",{on:{searchGig:e.filterByKey}})],1)]),i("gig-list",{attrs:{currUser:e.user,gigs:e.gigs},on:{gigClicked:e.gigClicked}}),e.showCategories?i("hr"):e._e(),i("home-footer")],1)},U=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h1",[e._v("\n      Gig\n      "),i("span",[e._v("It")])])}],x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"gig-toolbar-container"},[i("div",{staticClass:"gig-toolbar tab",class:e.filterBarStatus},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.filter.byCategory,expression:"filter.byCategory"}],staticClass:"tablinks",attrs:{type:"radio",name:"all gigs",value:"",id:"tab1",checked:""},domProps:{checked:e._q(e.filter.byCategory,"")},on:{click:e.searchByTitle,change:function(t){e.$set(e.filter,"byCategory","")}}}),i("label",{attrs:{for:"tab1"}},[e._v("All")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.filter.byCategory,expression:"filter.byCategory"}],staticClass:"tablinks",attrs:{type:"radio",name:"moving",value:"moving",id:"tab2"},domProps:{checked:e._q(e.filter.byCategory,"moving")},on:{click:e.searchByTitle,change:function(t){e.$set(e.filter,"byCategory","moving")}}}),e._m(0),i("input",{directives:[{name:"model",rawName:"v-model",value:e.filter.byCategory,expression:"filter.byCategory"}],staticClass:"tablinks",attrs:{type:"radio",name:"house-work",value:"house-work",id:"tab3"},domProps:{checked:e._q(e.filter.byCategory,"house-work")},on:{click:e.searchByTitle,change:function(t){e.$set(e.filter,"byCategory","house-work")}}}),e._m(1),i("input",{directives:[{name:"model",rawName:"v-model",value:e.filter.byCategory,expression:"filter.byCategory"}],staticClass:"tablinks",attrs:{type:"radio",name:"technical",value:"technical",id:"tab4"},domProps:{checked:e._q(e.filter.byCategory,"technical")},on:{click:e.searchByTitle,change:function(t){e.$set(e.filter,"byCategory","technical")}}}),e._m(2),i("input",{directives:[{name:"model",rawName:"v-model",value:e.filter.byCategory,expression:"filter.byCategory"}],staticClass:"tablinks",attrs:{type:"radio",name:"pet-care",value:"pet-care",id:"tab6"},domProps:{checked:e._q(e.filter.byCategory,"pet-care")},on:{click:e.searchByTitle,change:function(t){e.$set(e.filter,"byCategory","pet-care")}}}),e._m(3),i("input",{directives:[{name:"model",rawName:"v-model",value:e.filter.byCategory,expression:"filter.byCategory"}],staticClass:"tablinks",attrs:{type:"radio",name:"other",value:"other",id:"tab7"},domProps:{checked:e._q(e.filter.byCategory,"other")},on:{click:e.searchByTitle,change:function(t){e.$set(e.filter,"byCategory","other")}}}),e._m(4)]),i("button",{staticClass:"toggle-filter-btn",class:e.filterBarStatus,on:{click:e.toggleFilterStatus}},[e._v("Filter")])])},O=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{attrs:{for:"tab2"}},[i("i",{staticClass:"fas fa-people-carry"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{attrs:{for:"tab3"}},[i("i",{staticClass:"fas fa-hammer"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{attrs:{for:"tab5"}},[i("i",{staticClass:"fas fa-male"}),i("i",{staticClass:"fas fa-female"}),i("i",{staticClass:"fas fa-male"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{attrs:{for:"tab6"}},[i("i",{staticClass:"fas fa-dog"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{attrs:{for:"tab7"}},[i("i",{staticClass:"fas fa-ellipsis-h"})])}],L={data:function(){return{filter:{byCategory:"",byTitle:""},showFilter:!1}},created:function(){this.$route.params.type&&(this.filter.byCategory=this.$route.params.type,this.$emit("searchGig",this.filter))},computed:{filterBarStatus:function(){return{open:this.showFilter,closed:!this.showFilter}}},methods:{searchByTitle:function(){this.$emit("searchGig",this.filter)},toggleFilterStatus:function(){this.showFilter=!this.showFilter}},watch:{"filter.byCategory":function(){this.$emit("searchGig",this.filter)}}},T=L,S=(i("344b"),Object(g["a"])(T,x,O,!1,null,null,null));S.options.__file="gigToolbar.vue";var M=S.exports,B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.gigCategoryCounter?i("section",{staticClass:"gig-categories-container"},[i("div",{staticClass:"category moving"},[i("el-badge",{staticClass:"item badge",attrs:{value:e.gigCategoryCounter.moving}},[i("router-link",{attrs:{to:"/gig/category/moving"}},[i("i",{staticClass:"fas fa-people-carry"}),i("h1",[e._v("Moving")])])],1)],1),i("div",{staticClass:"category house-work"},[i("el-badge",{staticClass:"item badge",attrs:{value:e.gigCategoryCounter["house-work"]}},[i("router-link",{attrs:{to:"/gig/category/house-work"}},[i("i",{staticClass:"fas fa-hammer"}),i("h1",[e._v("House-Work")])])],1)],1),i("div",{staticClass:"category delivery"},[i("el-badge",{staticClass:"item badge",attrs:{value:e.gigCategoryCounter.delivery}},[i("router-link",{attrs:{to:"/gig/category/delivery"}},[i("i",{staticClass:"fas fa-parachute-box"}),i("h1",[e._v("Delivery")])])],1)],1),i("div",{staticClass:"category pet-care"},[i("el-badge",{staticClass:"item badge",attrs:{value:e.gigCategoryCounter["pet-care"]}},[i("router-link",{attrs:{to:"/gig/category/pet-care"}},[i("i",{staticClass:"fas fa-dog"}),i("h1",[e._v("Pet-Care")])])],1)],1),i("div",{staticClass:"category line-queue"},[i("el-badge",{staticClass:"item badge",attrs:{value:e.gigCategoryCounter["line-queue"]}},[i("router-link",{attrs:{to:"/gig/category/line-queue"}},[i("i",{staticClass:"fas fa-male"}),i("i",{staticClass:"fas fa-female"}),i("i",{staticClass:"fas fa-male"}),i("h1",[e._v("Line Queue")])])],1)],1),i("div",{staticClass:"category other"},[i("el-badge",{staticClass:"item badge",attrs:{value:e.gigCategoryCounter.other}},[i("router-link",{attrs:{to:"/gig/category/other"}},[i("i",{staticClass:"fas fa-ellipsis-h"}),i("h1",[e._v("Other")])])],1)],1)]):e._e()},R=[],E={props:{gigCategoryCounter:Object},name:"gigCategories",created:function(){},methods:{},computed:{}},A=E,j=(i("3958"),Object(g["a"])(A,B,R,!1,null,"0a0a37f7",null));j.options.__file="gigCategories.cmp.vue";var N=j.exports,D=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},F=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",{staticClass:"home-footer"},[i("h1",[e._v("\n    Gig"),i("span",[e._v("It")])]),i("div",{staticClass:"social-links-container"},[i("a",{attrs:{href:"#"}},[i("i",{staticClass:"fab fa-facebook"})]),i("a",{attrs:{href:"#"}},[i("i",{staticClass:"fab fa-instagram"})]),i("a",{attrs:{href:"#"}},[i("i",{staticClass:"fab fa-linkedin"})])])])}],q={name:"homeFooter"},K=q,J=(i("64ad"),Object(g["a"])(K,D,F,!1,null,"33d8546e",null));J.options.__file="homeFooter.cmp.vue";var H=J.exports,W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"gig-list grid"},e._l(e.gigs,function(t){return i("gig-prev",{key:t._id,attrs:{gig:t,currUser:e.currUser},nativeOn:{click:function(i){e.$emit("gigClicked",t._id)}}})}))},z=[],Y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.gig&&e.publisher?i("li",[i("div",{staticClass:"gig-image",class:e.classByCategory,style:{backgroundImage:"url("+e.gig.details.img+")",objectFit:"contain"}}),i("div",[i("div",{staticClass:"publisher-container"},[i("img",{attrs:{src:e.publisher.img}}),i("div",{staticClass:"publisher-info"},[i("h3",[e._v(e._s(e.publisher.name.first+" "+e.publisher.name.last))]),e._m(0)])]),i("div",{staticClass:"gig-details"},[i("h3",[e._v(e._s(e.gig.details.title))]),i("p",{staticClass:"gig-prev-desc"},[e._v(e._s(e.gig.details.desc))]),e.gig.details.pos.dist?i("p",[e._v(e._s(e.gig.details.pos.dist)+" KM Away")]):i("p",[e._v(" "+e._s(e.gig.details.place))])]),i("div",{staticClass:"lower-bar-container"},[i("p",[e._v(e._s(e.gig.details.price)+"₪")]),e.isAlreadyPending?i("button",[e._v("Pending")]):i("button",[e._v("Gig\n        "),i("span",[e._v("It")])])])])]):e._e()},V=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h3",[i("i",{staticClass:"fas fa-star"}),e._v("\n           \n          "),i("span",[e._v("4.2")])])}],Q=(i("7514"),{props:{gig:Object,currUser:Object},data:function(){return{publisher:null,isAlreadyPending:!1}},computed:{classByCategory:function(){return{delivery:"delivery"===this.gig.category,other:"other"===this.gig.category,moving:"moving"===this.gig.category,"house-work":"house-work"===this.gig.category,"line-queue":"line-queue"===this.gig.category,"pet-care":"pet-care"===this.gig.category}}},created:function(){var e=this;if(this.currUser){var t=this.currUser.gigsIds.pending.find(function(t){return t===e.gig._id});t&&(this.isAlreadyPending=!0)}this.$store.dispatch({type:"getUserById",userId:this.gig.publisherId}).then(function(t){return e.publisher=t}).then(function(t){return e.isPending()}),this.$store.dispatch},methods:{isPending:function(){}}}),X=Q,Z=(i("3956"),Object(g["a"])(X,Y,V,!1,null,null,null));Z.options.__file="gigPrev.cmp.vue";var ee=Z.exports,te={props:{gigs:Array,currUser:Object},components:{gigPrev:ee}},ie=te,se=(i("6a0e"),Object(g["a"])(ie,W,z,!1,null,null,null));se.options.__file="gigList.vue";var re=se.exports,ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map-container"},[this.editPage?i("div",{staticClass:"add-pin-container"},[i("h2",[e._v("Search and add a pin")]),i("div",[i("gmap-autocomplete",{staticClass:"add-pin-input",attrs:{placeholder:"Enter a location"},on:{place_changed:e.setPlace}}),i("button",{staticClass:"add-pin-btn",on:{click:function(t){return t.preventDefault(),e.addMarker(t)}}},[e._v("Add")])],1)]):e._e(),i("gmap-map",{ref:"map",staticStyle:{width:"100%",height:"400px"},attrs:{center:e.center,zoom:12}},e._l(e.markers,function(t,s){return i("gmap-marker",{key:s,staticClass:"imBoss",attrs:{position:t.position},on:{click:function(i){e.center=t.position}}})}))],1)},ae=[],oe={props:["gig","editPage"],name:"GoogleMap",data:function(){return{center:{},markers:[],places:[],currentPlace:null}},mounted:function(){var e=this;this.gig._id?(this.currentPlace=this.gig.details.location,this.center={lat:this.gig.details.location.lat,lng:this.gig.details.location.lng},this.markers.push({position:{lat:this.gig.details.location.lat,lng:this.gig.details.location.lng}}),navigator.geolocation.getCurrentPosition(function(t){e.markers.push({position:{lat:t.coords.latitude,lng:t.coords.longitude}})}),setTimeout(function(){e.getRoute()},500)):this.geolocate()},methods:{setPlace:function(e){this.currentPlace=e,this.$emit("setPlace",e)},addMarker:function(){if(this.currentPlace){var e={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.$emit("addMarker",e),this.markers.splice(0,1),this.places.splice(0,1),this.markers.push({position:e}),this.places.push(this.currentPlace),this.center=e,this.currentPlace=null}},geolocate:function(){var e=this;navigator.geolocation.getCurrentPosition?this.center={lat:32.0853,lng:34.781769}:navigator.geolocation.getCurrentPosition(function(t){console.log(),e.center={lat:t.coords.latitude,lng:t.coords.longitude}})},getRoute:function(){this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer,this.directionsDisplay.setMap(this.$refs.map.$mapObject);var e=this;e.directionsService.route({origin:this.markers[0].position,destination:this.markers[1].position,travelMode:"DRIVING"},function(t,i){"OK"===i?e.directionsDisplay.setDirections(t):console.log("Directions request failed due to "+i)})}},destroyed:function(){},components:{}},ce=oe,le=(i("d005"),Object(g["a"])(ce,ne,ae,!1,null,"5392ae20",null));le.options.__file="googleMap.vue";var ge=le.exports,ue={name:"home",data:function(){return{coverCounter:0,filter:{byCategory:"",byTitle:""},showCategories:!0,carouselObjs:[{imgUrl:"https://res.cloudinary.com/barpel/image/upload/v1544309961/GigIt/twoGigers.png",txt:"Find your Gig and use your skills to make some easy extra money!"},{imgUrl:"https://res.cloudinary.com/barpel/image/upload/v1544310157/GigIt/adudegiger.png",txt:"Helping the community is part of our agenda. Help out today!"},{imgUrl:"https://res.cloudinary.com/barpel/image/upload/v1544309961/GigIt/thorgiger.png",txt:"New to GigIt? Take a look at our about page to learn more about it"},{imgUrl:"https://res.cloudinary.com/barpel/image/upload/v1544309960/GigIt/gigrit.png",txt:"Need to get something done? You can have your Gig online in less than 2 minutes!"}]}},computed:{gigs:function(){var e=JSON.parse(JSON.stringify(this.$store.getters.gigs));return e},gigCategoryCounter:function(){var e=JSON.parse(JSON.stringify(this.$store.getters.gigCategoryCounter));return e},user:function(){return this.$store.getters.user}},methods:{gigClicked:function(e){this.$router.push("gig/".concat(e))},filterByKey:function(){this.showCategories=!1,this.$store.dispatch({type:"filterByKey",filter:this.filter})},focusOnSearch:function(){this.$refs.searchGig.focus()}},components:{gigCategories:N,homeFooter:H,gigList:re,googleMap:ge,gigToolbar:M},created:function(){var e=this;this.$store.dispatch({type:"toggleLoadingOn"}),this.$store.dispatch({type:"getGigs"}).then(function(){return e.$store.dispatch({type:"toggleLoadingOff"})}),navigator.geolocation.getCurrentPosition(function(t){e.$store.dispatch({type:"userLocation",position:t})})},mounted:function(){},watch:{"filter.byTitle":function(){this.filter.byTitle||(this.showCategories=!0)}}},de=ue,pe=(i("68ef"),Object(g["a"])(de,P,U,!1,null,"102e0d45",null));pe.options.__file="home.vue";var he=pe.exports,fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"login-container"},[i("h1",[e._v("Login")]),i("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.creds.username,expression:"creds.username"}],ref:"elUsername",attrs:{type:"text",placeholder:"Username"},domProps:{value:e.creds.username},on:{input:function(t){t.target.composing||e.$set(e.creds,"username",t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.creds.password,expression:"creds.password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.creds.password},on:{input:function(t){t.target.composing||e.$set(e.creds,"password",t.target.value)}}}),i("button",{attrs:{type:"submit"}},[e._v("Login")])]),i("h1",[e._v("Not a Gigster yet?\n    "),i("router-link",{attrs:{to:"/user/register"}},[e._v("Register")])],1)])},me=[],ve={data:function(){return{creds:{username:"",password:""}}},methods:{login:function(){var e=this;this.$store.dispatch({type:"onLogin",userCreds:this.creds}).then(function(){return e.$router.push("/")}).then(function(){return e.$store.dispatch("openUserSocket")}).catch(function(t){400===t.response.status&&e.$message.error("Wrong username or password")})}},created:function(){this.$store.dispatch({type:"checkLoggedUser"})},mounted:function(){this.$refs.elUsername.focus()}},be=ve,ye=(i("66c0"),Object(g["a"])(be,fe,me,!1,null,null,null));ye.options.__file="login.vue";var _e=ye.exports,Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"registration-container",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[e._m(0),i("div",{staticClass:"container1"},[i("el-input",{attrs:{placeholder:"First Name",clearable:""},model:{value:e.user.name.first,callback:function(t){e.$set(e.user.name,"first",t)},expression:"user.name.first"}}),i("el-input",{attrs:{placeholder:"Last Name",clearable:""},model:{value:e.user.name.last,callback:function(t){e.$set(e.user.name,"last",t)},expression:"user.name.last"}})],1),i("div",{staticClass:"container2"},[i("label",[i("span",[e._v("Age:")]),i("el-input-number",{attrs:{min:18},model:{value:e.user.age,callback:function(t){e.$set(e.user,"age",t)},expression:"user.age"}})],1),i("el-input",{attrs:{placeholder:"Email",type:"email",clearable:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),i("el-input",{attrs:{type:"textarea",placeholder:"Tell us a little about yourself",resize:"none",autosize:{minRows:3,maxRows:3}},model:{value:e.user.aboutMe,callback:function(t){e.$set(e.user,"aboutMe",t)},expression:"user.aboutMe"}}),i("div",{staticClass:"container3"},[i("el-input",{attrs:{placeholder:"Username",clearable:""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),i("el-input",{attrs:{placeholder:"Password",type:"password",clearable:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),i("div",{staticClass:"container4"},[i("el-select",{attrs:{multiple:"",filterable:"","default-first-option":"",placeholder:"What are your skills?"},model:{value:e.user.skills,callback:function(t){e.$set(e.user,"skills",t)},expression:"user.skills"}},e._l(e.skillopts,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),i("div",[i("el-input",{attrs:{placeholder:"Image URL"},model:{value:e.user.img,callback:function(t){e.$set(e.user,"img",t)},expression:"user.img"}},[i("template",{slot:"prepend"},[e._v("Http://")])],2)],1),i("button",{attrs:{type:"submit"}},[e._v("Register")])],1)},we=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h1",[e._v("\n    Register to\n    "),i("span",[e._v("\n      Gig\n      "),i("span",[e._v("It")])])])}],ke=(i("7f7f"),{name:"register",data:function(){return{user:{name:{first:"",last:""},age:18,aboutMe:"",username:"",password:"",email:"",img:"",skills:[],mainArea:{lat:32.023914,lng:34.76021},gigsIds:{published:[],pending:[],completed:[]},reviews:{totalAverage:5,publishedAverage:5,published:[{gigId:"0",title:"New User",givenBy:{name:"GigIt Team",img:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/User_icon_2.svg/220px-User_icon_2.svg.png"},createdAt:1543412028131,ratings:{text:"A newly added Gigster, be the first to review him!",payment:5,reliable:5,overall:5,average:5}}],completedAverage:5,completed:[{gigId:"0",title:"New User",givenBy:{name:"GigIt Team",img:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/User_icon_2.svg/220px-User_icon_2.svg.png"},createdAt:1543412028131,ratings:{text:"A newly added Gigster, be the first to review him!",work:5,reliable:5,overall:5,average:5}}]},chats:[],isInboxRead:!0,isMyGigsRead:!0},fileList:[],skillopts:[{value:"gardening",label:"Gardening"},{value:"pets",label:"Pets"},{value:"patience",label:"Patience"},{value:"house-work",label:"House-Work"},{value:"mobility",label:"Mobility"},{value:"physical strength",label:"Physical Strength"},{value:"computers",label:"Computers"}]}},methods:{register:function(){var e=this,t=this.user;t.name.first&&t.username&&t.password&&t.age&&t.email&&t.name.last&&t.aboutMe?this.$store.dispatch({type:"register",user:this.user}).then(function(){return e.$router.push("/")}).catch(function(t){401===t.response.status&&e.$message.error("Username taken!")}):this.$message({message:"Please fill out all fields!",type:"warning"})},handlePreview:function(e){console.log(e)},handleRemove:function(e){console.log(e)}}}),Ie=ke,Ge=(i("dda1"),Object(g["a"])(Ie,Ce,we,!1,null,"bab7e9b8",null));Ge.options.__file="register.vue";var $e=Ge.exports,Pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"gig-container"},[e._m(0),i("h2",[e._v("Looking for something specific? Find your own Gig using the filtering options")]),i("div",{staticClass:"gig-list-wrappe"},[i("gig-toolbar",{on:{showCategory:e.gigsFilterBy,searchGig:e.searchGigByKey}}),i("gig-list",{attrs:{gigs:e.gigs},on:{gigClicked:e.gigClicked}})],1)])},Ue=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h1",[e._v("\n    Gig\n    "),i("span",[e._v("It")])])}],xe={computed:{gigs:function(){return this.$store.getters.gigs}},methods:{gigClicked:function(e){this.$router.push("/gig/".concat(e))},gigsFilterBy:function(e){console.log(2),this.$store.dispatch({type:"getGigs",category:e}),this.$router.push("/gig/category/".concat(e))},searchGigByKey:function(e){this.$store.dispatch({type:"filterByKey",filter:e})}},created:function(){},components:{gigList:re,gigToolbar:M}},Oe=xe,Le=(i("0994"),Object(g["a"])(Oe,Pe,Ue,!1,null,"6d1e0260",null));Le.options.__file="gig.vue";var Te=Le.exports,Se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"gig-edit"},[i("h1",[e._v("\n    "+e._s(e.isAdd)+"\n    "),i("span",[e._v("Gig")])]),e.editComplete?i("div",{staticClass:"after-edit-container"},[i("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 130.2 130.2"}},[i("circle",{staticClass:"path circle",attrs:{fill:"none",stroke:"#73AF55","stroke-width":"6","stroke-miterlimit":"10",cx:"65.1",cy:"65.1",r:"62.1"}}),i("polyline",{staticClass:"path check",attrs:{fill:"none",stroke:"#73AF55","stroke-width":"6","stroke-linecap":"round","stroke-miterlimit":"10",points:"100.2,40.2 51.5,88.8 29.8,67.5 "}})]),i("p",{staticClass:"success"},[e._v("Your Gig was added!\n      "),i("br"),e._v("Check it out"),i("br"),i("router-link",{attrs:{to:"/gig/"+e.newGigId}},[e._v("here")])],1)]):i("div",{staticClass:"gig-edit-container"},[i("form",{staticClass:"gig-edit-form",on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[i("div",{staticClass:"form-wrapper-1"},[i("div",{staticClass:"gig-title-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.gig.details.title,expression:"gig.details.title"}],staticClass:"gig-title-input",attrs:{placeholder:"Gig Title"},domProps:{value:e.gig.details.title},on:{input:function(t){t.target.composing||e.$set(e.gig.details,"title",t.target.value)}}})]),i("div",{staticClass:"gig-category-container"},[i("el-select",{staticClass:"gig-category-input",attrs:{placeholder:"Category"},model:{value:e.gig.category,callback:function(t){e.$set(e.gig,"category",t)},expression:"gig.category"}},e._l(e.categoryOpts,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value,size:"medium"}})}))],1)]),e.gig.category?i("div",{staticClass:"photo-gallery grid"},[i("vue-gallery",{attrs:{images:this.imgsCategory,index:e.index},on:{close:function(t){e.index=null}}}),e._l(e.imgsCategory,function(t,s){return i("div",{key:s,staticClass:"image",class:e.selectedImgClass(t),style:{backgroundImage:"url("+t+")",objectFit:"cover"},on:{click:function(i){e.pickImg(t)}}})})],2):e._e(),i("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"Describe your gig..."},model:{value:e.gig.details.desc,callback:function(t){e.$set(e.gig.details,"desc",t)},expression:"gig.details.desc"}}),i("div",{staticClass:"form-wrapper-2"},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"Select Gig start time","default-time":"12:00:00"},model:{value:e.gig.details.gigTime.from,callback:function(t){e.$set(e.gig.details.gigTime,"from",t)},expression:"gig.details.gigTime.from"}}),i("el-date-picker",{attrs:{type:"datetime",placeholder:"Select Gig end time","default-time":"12:00:00"},model:{value:e.gig.details.gigTime.to,callback:function(t){e.$set(e.gig.details.gigTime,"to",t)},expression:"gig.details.gigTime.to"}})],1),e.editPage?i("google-map",{attrs:{editPage:e.editPage,gig:e.gig},on:{addMarker:e.getLocation,setPlace:e.setPlaceEdit}}):e._e(),i("label",{staticClass:"gig-price-container"},[e.isShowingTip?i("h4",{staticClass:"pro-tip"},[e._v("PRO-TIP: Set a fair price to get the Gig done quickly!")]):e._e(),i("h2",[e._v("Price:")]),i("el-input-number",{attrs:{step:10,min:0,size:"small"},on:{focus:e.toggleTip,blur:e.toggleTip},model:{value:e.gig.details.price,callback:function(t){e.$set(e.gig.details,"price",t)},expression:"gig.details.price"}})],1),e._m(0)],1)])])},Me=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"gig-submit-btn",attrs:{type:"submit"}},[e._v("\n        Save\n        "),i("span",[e._v("Gig")])])}],Be=i("067c"),Re=i.n(Be),Ee={data:function(){return{"pet-care":["https://res.cloudinary.com/barpel/image/upload/v1544299638/GigIt/shutterstock_148172258.jpg","https://res.cloudinary.com/barpel/image/upload/v1544299638/GigIt/shutterstock_556414654.jpg","https://res.cloudinary.com/barpel/image/upload/v1544299713/GigIt/shutterstock_443728036.jpg"],"house-work":["https://res.cloudinary.com/barpel/image/upload/v1543848353/GigIt/plumber.jpg","https://res.cloudinary.com/barpel/image/upload/v1544301300/GigIt/shutterstock_381636988.jpg","https://res.cloudinary.com/barpel/image/upload/v1544301308/GigIt/shutterstock_1007119828.jpg"],other:["https://res.cloudinary.com/barpel/image/upload/v1544303327/GigIt/shutterstock_214814605.jpg","https://res.cloudinary.com/barpel/image/upload/v1544303327/GigIt/shutterstock_788923183.jpg","https://res.cloudinary.com/barpel/image/upload/v1544303524/GigIt/shutterstock_1164331375.jpg"],delivery:["https://res.cloudinary.com/barpel/image/upload/v1544303774/GigIt/shutterstock_1165732177_1.jpg","https://res.cloudinary.com/barpel/image/upload/v1544303774/GigIt/shutterstock_794998891.jpg","https://res.cloudinary.com/barpel/image/upload/v1544303773/GigIt/shutterstock_171790418.jpg"],moving:["https://res.cloudinary.com/barpel/image/upload/v1544304572/GigIt/shutterstock_369919934.jpg","https://res.cloudinary.com/barpel/image/upload/v1544304573/GigIt/shutterstock_366444461.jpg","https://res.cloudinary.com/barpel/image/upload/v1544304617/GigIt/shutterstock_516642439.jpg"],"line-queue":["https://res.cloudinary.com/barpel/image/upload/v1544304965/GigIt/shutterstock_239818981.jpg","https://res.cloudinary.com/barpel/image/upload/v1544304965/GigIt/shutterstock_733196824.jpg","https://res.cloudinary.com/barpel/image/upload/v1544304965/GigIt/shutterstock_467126900.jpg"],index:null,editPage:!0,gig:{publisherId:"",category:"",createdAt:0,pendingUsers:[],isRead:!0,isActive:!0,details:{title:"",desc:"",price:0,img:"",pos:{lat:null,lng:null},location:{},place:"",gigTime:{from:"",to:""},imgs:[]},holdingUsers:[],isPickedGigster:!1},editComplete:!1,newGigId:"",isShowingTip:!1,categoryOpts:[{value:"delivery",label:"Delivery"},{value:"house-work",label:"House-Work"},{value:"pet-care",label:"Pet-Care"},{value:"other",label:"Other"},{value:"line-queue",label:"Line-Queue"},{value:"moving",label:"Moving"}]}},computed:{user:function(){return this.$store.getters.user},isAdd:function(){return this.gig._id?"Edit":"Add"},currTime:function(){var e=new Date;return"".concat(e.getHours(),":").concat(e.getMinutes())},imgsCategory:function(){var e=this.gig.category,t=this[e];return t}},methods:{selectedImgClass:function(e){return this.gig.details.img===e?"selected":""},pickImg:function(e){this.gig.details.img=e},toggleTip:function(){this.isShowingTip=!this.isShowingTip},save:function(){var e=this;console.log(this.gig.details.location);var t=this.gig,i=t.details;if(t.category&&i.title&&i.price&&i.desc){t.createdAt=Date.now(),t.publisherId=this.user._id;var s=t._id?null:this.user.gigsIds.published;console.log("gig",t.details.location),this.$store.dispatch({type:"updateGig",gig:t,userGigsListToUpdate:s}).then(function(t){console.log("gig saved!",t),e.editComplete=!0,e.newGigId=t._id})}else this.$message({message:"Please fill out all fields!",type:"warning"})},setPlaceEdit:function(e){console.log(e.vicinity),this.gig.details.place=e.vicinity,console.log(this.gig.details.place)},getLocation:function(e){console.log("this is the location from edit",e),this.gig.details.location=e}},created:function(){var e=this;console.log("editing gig");var t=this.$route.params.gigId;t&&this.$store.dispatch({type:"getGigById",gigId:t}).then(function(t){t&&(e.gig=t)})},components:{GoogleMap:ge,VueGallery:Re.a}},Ae=Ee,je=(i("3ad5"),Object(g["a"])(Ae,Se,Me,!1,null,null,null));je.options.__file="gigEdit.vue";var Ne=je.exports,De=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.gig&&e.publisher?i("section",{staticClass:"gig-details-container"},[i("div",{staticClass:"top-container"},[i("h6",{on:{click:e.goBack}},[e._m(0)]),i("div",{staticClass:"top-user-container"},[i("div",{staticClass:"publisher-info"},[i("img",{attrs:{src:e.publisher.img,alt:""},on:{click:function(t){e.goToProfile(e.gig.publisherId)}}}),i("div",[i("h4",[e._v(e._s(e.publisher.name.first+" "+e.publisher.name.last))]),i("h4",{staticClass:"publisher-review"},[i("el-rate",{attrs:{value:e.publisher.reviews.totalAverage,disabled:"","show-score":"","text-color":"#ff9900","score-template":"({value})"}})],1)])]),e.isGigOwner?i("button",{on:{click:function(t){return t.stopPropagation(),e.editGig(t)}}},[i("i",{staticClass:"fas fa-pencil-alt"})]):e._e()])]),i("div",{staticClass:"mid-container"},[i("div",{staticClass:"gig-details-left-container"},[i("h4",[e._v(e._s(e.gig.details.title))]),i("h5",[e._v("Category: "+e._s(this.gig.category))]),i("h6",[e._v("Description:\n        "),i("br"),i("p",[e._v("“ "+e._s(e.gig.details.desc)+" ”")])]),i("h6",[e._v("Distance: "+e._s(e.gig.details.pos.dist)+" KM Away")]),i("p",[e._v("\n        From: "+e._s(e._f("localTime")(e.gig.details.gigTime[0]))+"\n        "),i("br"),i("br"),e._v("\n        To: "+e._s(e._f("localTime")(e.gig.details.gigTime[1]))+"\n      ")])]),i("div",{staticClass:"gig-details-right-container"},[i("div",{staticClass:"call-to-action-container"},[i("p",[e._v("Earn "+e._s(this.gig.details.price)+"₪ for this Gig")]),e.isGigOwner?e._e():i("button",{staticClass:"gigit-btn",on:{click:e.requestGig}},[i("h1",[e.isAlreadyPending?i("span",[e._v("Pending")]):i("span",[e._v("\n              Gig\n              "),i("span",[e._v("It")])])])])]),i("div",{staticClass:"map-container"},[i("google-map",{attrs:{editPage:e.editPage,gig:e.gig}})],1)])])]):e._e()},Fe=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("i",{staticClass:"fas fa-arrow-left"})])}],qe={name:"gigDetails",data:function(){return{editPage:!1,gig:null,isGigOwner:null,isAlreadyPending:!1,publisher:null}},computed:{user:function(){return this.$store.getters.user},isLoggedin:function(){return this.$store.getters.isLoggedin}},filter:{localTime:function(e){return e||""}},methods:{goBack:function(){this.$router.push("/")},requestGig:function(){var e=this;if(!this.isAlreadyPending){var t=this.gig.publisherId;f.$emit(p,{type:"success",txt:"Gig Signed"}),this.$store.dispatch({type:"emitToUser",eventMsg:{txt:"".concat(this.user.name.first," wants to be your gigster!"),type:"success",link:"/user/".concat(this.user._id),gigsterImg:this.user.img},action:"toProfile",userId:t});var i=this.user;this.gig.isRead=!1,this.gig.pendingUsers.push({name:i.name.first,id:i._id,img:i.img,completedReviewsAverage:i.reviews.completedAverage});var s=this.user.gigsIds.pending;this.$store.dispatch({type:"updateGig",gig:this.gig,userGigsListToUpdate:s}).then(function(){return e.$router.push("/")})}},editGig:function(){this.$router.push("/gig/edit/".concat(this.gig._id))},goToProfile:function(e){this.$router.push("/user/".concat(e))}},created:function(){var e=this,t=this.$route.params.gigId;this.$store.dispatch({type:"getGigById",gigId:t}).then(function(t){if(e.gig=t,e.$store.dispatch({type:"getUserById",userId:t.publisherId}).then(function(t){return e.publisher=t}),e.$store.dispatch({type:"isGigOwner",publisherId:t.publisherId}).then(function(t){return e.isGigOwner=t}),e.isLoggedin){var i=e.user.gigsIds.pending.find(function(e){return e===t._id});i&&(e.isAlreadyPending=!0)}})},mounted:function(){},components:{GoogleMap:ge}},Ke=qe,Je=Object(g["a"])(Ke,De,Fe,!1,null,null,null);Je.options.__file="gigDetails.vue";var He=Je.exports,We=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("section",{staticClass:"user-gigs-container"},[e.gigs.publishedGigs.length?i("ul",{staticClass:"published-gigs"},[i("h2",[e._v("Published Gigs:")]),e._l(e.gigs.publishedGigs,function(t){return t.pendingUsers?i("div",{key:t._id},[i("gig-accordion",{attrs:{gigsters:t.pendingUsers,header:t.details.title,isPickedGigster:t.isPickedGigster},on:{gigsterPicked:function(i){e.gigsterPicked(i,t)},contactGigster:function(i){e.contactGigster(i,{title:t.details.title,_id:t._id})}}})],1):e._e()})],2):e._e(),i("pending-gig",{attrs:{gigs:e.gigs.pendingGigs}})],1):e._e()},ze=[],Ye=(i("ac6a"),i("be94")),Ve=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-gigs-container"},[i("ul",[i("div",{staticClass:"gig-header",on:{click:function(t){e.isOpen=!e.isOpen}}},[e.isOpen?i("span",[i("i",{staticClass:"fas fa-angle-down"})]):i("span",[i("i",{staticClass:"fas fa-angle-right"})]),i("h1",[e._v(e._s(e.header))]),i("span",{on:{click:function(t){e.removeGig(e.gigId)}}},[i("i",{staticClass:"fas fa-trash-alt"})])]),e._l(e.gigsters,function(t){return e.isOpen?i("li",{key:t._id,staticClass:"gigster-container"},[i("img",{attrs:{src:t.img},on:{click:function(i){e.goToProfile(t._id)}}}),i("h2",[e._v(e._s(t.name)+" wants to be your Gigster!")]),i("h3",{staticClass:"pending-user-rating-container"},[i("span",[e._v("Rating:")]),i("i",{staticClass:"fas fa-star"}),i("span",[e._v(e._s(t.completedReviewsAverage))])]),e.isPickedGigsterData?i("div",{staticClass:"gigster-btn-container-after"},[i("button",{staticClass:"accordion-gigit-btn",on:{click:function(i){e.contactGigster(t)}}},[i("i",{staticClass:"fas fa-comments"})]),i("button",{staticClass:"accordion-completed-btn",on:{click:function(i){e.$emit("openReviewForm",{gigId:e.gigId,title:e.header,gigsterId:t.id,isForGigster:!0,nameForReview:t.name})}}},[i("i",{staticClass:"fas fa-check-circle"})]),i("button",{staticClass:"accordion-later-btn",on:{click:e.gigCancel}},[i("i",{staticClass:"fas fa-ban"})])]):i("div",{staticClass:"gigster-btn-container"},[i("button",{staticClass:"accordion-gigit-btn",on:{click:function(i){e.gigsterPicked(t)}}},[e._v("\n          Gig\n          "),i("span",[e._v("It")])]),i("button",{staticClass:"accordion-later-btn"},[e._v("No Thanks")])])]):e._e()})],2)])},Qe=[],Xe={props:["header","gigsters","gigId","isPickedGigster","gigTitle"],name:"gigAccordion",data:function(){return{isPickedGigsterData:this.isPickedGigster,isOpen:!1,isGigIt:!1}},methods:{goToProfile:function(e){this.$router.push("/user/".concat(e))},gigsterPicked:function(e){this.isPickedGigsterData=!0,this.$emit("gigsterPicked",e)},gigCancel:function(){this.isPickedGigsterData=!1,this.$emit("gigsterPicked",null)},contactGigster:function(e){this.$emit("contactGigster",e)},removeGig:function(e){console.log("removeGig",e),this.$emit("removeGig",e)}}},Ze=Xe,et=(i("99fc"),Object(g["a"])(Ze,Ve,Qe,!1,null,"1280af8d",null));et.options.__file="gigAccordion.cmp.vue";var tt=et.exports,it=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"pending-gigs-container"},[i("div",{staticClass:"pending-gigs-header",on:{click:function(t){e.isOpen=!e.isOpen}}},[e.isOpen?i("span",[i("i",{staticClass:"fas fa-angle-down"})]):i("span",[i("i",{staticClass:"fas fa-angle-right"})]),i("h1",[e._v("Pending Gigs:")])]),e._l(e.gigs,function(t,s){return e.isOpen&&t?i("div",{key:s,staticClass:"pending-gigs"},[i("h2",{on:{click:function(i){e.goToGig(t._id)}}},[e._v(e._s(t.details.title))]),e._m(0,!0)]):e._e()})],2)},st=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",[e._v("\n      Cancel\n      "),i("span",[e._v("Gig")])])}],rt={props:["gigs"],name:"pendingGig",data:function(){return{isOpen:!1}},methods:{goToGig:function(e){this.$router.push("/gig/".concat(e))}}},nt=rt,at=(i("5e5e"),Object(g["a"])(nt,it,st,!1,null,"71f5ac4a",null));at.options.__file="pendingGig.cmp.vue";var ot=at.exports,ct=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"giger-review-container"},[i("div",{staticClass:"giger-review-screen"}),i("form",{staticClass:"giger-review-form",on:{submit:function(t){return t.preventDefault(),e.sumbitReview(t)}}},[i("h2",[e._v("How Was Your Gig With "+e._s(e.reviewStats.nameForReview)+" ?")]),i("div",{staticClass:"giger-review-field"},[i("h3",[e._v(e._s(e.proffesionalOrPayment)+":")]),i("el-rate",{model:{value:e.workOrPayment,callback:function(t){e.workOrPayment=t},expression:"workOrPayment"}})],1),i("div",{staticClass:"giger-review-field"},[i("h3",[e._v("Reliability:")]),i("el-rate",{model:{value:e.review.reliable,callback:function(t){e.$set(e.review,"reliable",t)},expression:"review.reliable"}})],1),i("div",{staticClass:"giger-review-field"},[i("h3",[e._v("Overall:")]),i("el-rate",{model:{value:e.review.overall,callback:function(t){e.$set(e.review,"overall",t)},expression:"review.overall"}})],1),i("div",{staticClass:"giger-review-text"},[i("el-input",{attrs:{placeholder:"Please give us few words",type:"textarea",clearable:""},model:{value:e.review.text,callback:function(t){e.$set(e.review,"text",t)},expression:"review.text"}})],1),i("button",{staticClass:"giger-review-cancel",on:{click:function(t){return t.preventDefault(),e.skipReview(t)}}},[e._v("Skip")]),i("button",{staticClass:"giger-review-send",attrs:{type:"submit"}},[e._v("Send Review")])])])},lt=[],gt={props:{reviewStats:Object},data:function(){return{workOrPayment:1,review:{reliable:1,overall:1,text:null}}},computed:{proffesionalOrPayment:function(){return this.reviewStats.isForGigster?"Proffesional":"Payment"}},methods:{sumbitReview:function(){var e=this.review;this.reviewStats.isForGigster?e.work=this.workOrPayment:e.payment=this.workOrPayment,e.average=((e.reliable+e.overall+this.workOrPayment)/3).toFixed(1),this.$emit("reviewSumbitted",e)},skipReview:function(){var e=this;this.$confirm("Our community relies on your reviews. Go back to the review? ","Warning",{confirmButtonText:"Back to the review",cancelButtonText:"No thanks",type:"warning"}).catch(function(){e.$emit("reviewSumbitted")})}}},ut=gt,dt=(i("8ff6"),Object(g["a"])(ut,ct,lt,!1,null,null,null));dt.options.__file="gigerReview.cmp.vue";var pt=dt.exports,ht={data:function(){return{gigs:{completedGigs:[],pendingGigs:[],publishedGigs:[]},pickGigster:{isPicked:!1,gigster:[]}}},computed:{user:function(){return this.$store.getters.user},PublishGigs:function(){return pickGigster.isPicked?pickGigster:publishedGigs}},methods:{gigsterPicked:function(e,t){t.isPickedGigster=!0,t.holdingUsers=t.pendingUsers,t.pendingUsers=[e],this.$socket.emit("test","am testing"),this.$store.dispatch({type:"updateGig",gig:t})},contactGigster:function(e,t){var i=this;this.$store.dispatch({type:"contactUser",gigster:e,gigData:t,maister:this.user}).then(function(){return i.$router.push("/user/".concat(i.user._id,"/inbox"))})},getUserGigs:function(){var e=this,t=Object(Ye["a"])({},this.user.gigsIds),i=t.completed,s=t.pending,r=t.published;i.forEach(function(t){e.$store.dispatch({type:"getGigById",gigId:"".concat(t)}).then(function(t){e.gigs.completedGigs.push(t)})}),s.forEach(function(t){e.$store.dispatch({type:"getGigById",gigId:"".concat(t)}).then(function(t){e.gigs.pendingGigs.push(t)})}),r.forEach(function(t){e.$store.dispatch({type:"getGigById",gigId:"".concat(t)}).then(function(t){e.gigs.publishedGigs.push(t)})})},removeGigId:function(e){console.log(111111111111)},sumbitReview:function(e){}},created:function(){var e=this,t=this.$route.params.userId;this.$store.dispatch({type:"getUserById",userId:t}).then(function(){e.getUserGigs()})},components:{gigAccordion:tt,pendingGig:ot,gigerReview:pt}},ft=ht,mt=(i("e134"),Object(g["a"])(ft,We,ze,!1,null,"8c8905ae",null));mt.options.__file="userGigs.vue";var vt=mt.exports,bt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("section",{staticClass:"user-profile-container grid"},[i("div",{staticClass:"user-avatar-card"},[i("div",{staticClass:"user-wrapper"},[i("img",{attrs:{src:e.user.img,alt:""}}),i("h5",[e._v("\n        "+e._s(e.user.name.first)+" "+e._s(e.user.name.last)+"\n        "),i("el-rate",{attrs:{value:e.user.reviews.totalAverage,disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"}})],1)]),e.isOwnProfile?i("div",{staticClass:"profile-btns-wrapper"},[i("router-link",{staticClass:"profile-chats-btn",attrs:{to:"/user/"+e.user._id+"/inbox",tag:"button"}},[i("i",{staticClass:"far fa-comments"})]),i("button",{staticClass:"profile-logout-btn",on:{click:e.doLogout}},[i("i",{staticClass:"fas fa-power-off"}),e._v(" Logout\n      ")]),e._m(0),e._m(1)],1):i("div",[i("button",{staticClass:"user-profile-contact-btn"},[e._v("Contact Me")])])]),i("div",{staticClass:"profile-mid-wrapper"},[i("div",{staticClass:"user-profile-desc"},[i("h3",[e._v("About Me")]),i("p",[e._v(e._s(e.user.aboutMe))]),i("h3",[e._v("Skills")]),i("div",{staticClass:"user-profile-skills"},e._l(e.user.skills,function(t){return i("h4",{key:t},[e._v(e._s(t))])}))]),i("div",{staticClass:"profile-tabs-wrapper"},[i("div",{staticClass:"profile-tabs-container"},[i("div",{staticClass:"stv-radio-tabs-wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.tabContent,expression:"tabContent"}],staticClass:"stv-radio-tab",attrs:{type:"radio",name:"reviews",value:"1",id:"tab1",checked:""},domProps:{checked:e._q(e.tabContent,"1")},on:{change:function(t){e.tabContent="1"}}}),i("label",{attrs:{for:"tab1"}},[e._v("Reviews")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.tabContent,expression:"tabContent"}],staticClass:"stv-radio-tab",attrs:{type:"radio",name:"published gigs",value:"2",id:"tab2"},domProps:{checked:e._q(e.tabContent,"2")},on:{change:function(t){e.tabContent="2"}}}),i("label",{attrs:{for:"tab2"}},[e._v("Published Gigs")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.tabContent,expression:"tabContent"}],staticClass:"stv-radio-tab",attrs:{type:"radio",name:"pending gigs",value:"3",id:"tab3"},domProps:{checked:e._q(e.tabContent,"3")},on:{change:function(t){e.tabContent="3"}}}),i("label",{attrs:{for:"tab3"}},[e._v("Pending Gigs")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.tabContent,expression:"tabContent"}],staticClass:"stv-radio-tab",attrs:{type:"radio",name:"completed gigs",value:"4",id:"tab4"},domProps:{checked:e._q(e.tabContent,"4")},on:{change:function(t){e.tabContent="4"}}}),i("label",{attrs:{for:"tab4"}},[e._v("Completed Gigs")])])]),1===+e.tabContent?i("ul",{staticClass:"profile-reviews"},e._l(e.user.reviews.completed,function(t){return i("li",{key:t.gigId,staticClass:"profile-review"},[i("div",{staticClass:"profile-review-giver"},[i("img",{attrs:{src:t.givenBy.img}}),e._v("\n            "+e._s(t.givenBy.name)+"\n          ")]),i("div",{staticClass:"profile-review-stars"},[i("span",[i("span",[e._v("Work: "+e._s(t.ratings.work))]),i("i",{staticClass:"fas fa-star"})]),i("span",[i("span",[e._v("Reliable: "+e._s(t.ratings.reliable))]),i("i",{staticClass:"fas fa-star"})]),i("span",[i("span",[e._v("Overall: "+e._s(t.ratings.overall))]),i("i",{staticClass:"fas fa-star"})])]),i("div",{staticClass:"profile-review-details-container"},[i("p",{staticClass:"profile-review-title"},[e._v(e._s(t.title))]),i("p",[e._v(e._s(t.ratings.text))])])])})):e._e(),e.gigs.publishedGigs.length&&2===+e.tabContent?i("ul",{staticClass:"published-gigs"},e._l(e.gigs.publishedGigs,function(t){return t&&t.pendingUsers?i("div",{key:t._id},[t.pendingUsers?i("gig-accordion",{attrs:{gigsters:t.pendingUsers,gigId:t._id,header:t.details.title,isPickedGigster:t.isPickedGigster},on:{removeGig:function(t){e.removeGig(t,e.gigId)},gigsterPicked:function(i){e.gigsterPicked(i,t)},contactGigster:function(i){e.contactGigster(i,{title:t.details.title,_id:t._id})},openReviewForm:e.openReviewForm}}):e._e()],1):e._e()})):e._e(),e.gigs.pendingGigs.length&&3===+e.tabContent?i("ul",[i("pending-gig",{attrs:{gigs:e.gigs.pendingGigs}})],1):e._e()])]),e.showReviewForm?i("giger-review",{attrs:{reviewStats:e.currReviewStats},on:{reviewSumbitted:e.submitReview}}):e._e()],1):e._e()},yt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"profile-edit-btn"},[i("i",{staticClass:"fas fa-pencil-alt"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"profile-delete-btn"},[i("i",{staticClass:"fas fa-trash"})])}],_t={data:function(){return{user:null,isOwnProfile:!1,tabContent:1,gigs:{completedGigs:[],pendingGigs:[],publishedGigs:[]},pickGigster:{isPicked:!1,gigster:[]},showReviewForm:!1,currReviewStats:null}},methods:{doLogout:function(){this.$router.push("/"),this.$store.dispatch({type:"doLogout"})},removeGig:function(e){this.$store.dispatch({type:"deletePendingUsers",gigId:e})},loadUser:function(){var e=this,t=this.$route.params.userId;this.$store.dispatch({type:"getUserById",userId:t}).then(function(t){e.user=t,e.getUserGigs()}),this.$store.dispatch({type:"checkIsProfileOwner",userId:t}).then(function(t){return e.isOwnProfile=t})},gigsterPicked:function(e,t){e?(t.isPickedGigster=!0,t.holdingUsers=t.pendingUsers,t.pendingUsers=[e],this.$socket.emit("test","am testing"),this.$store.dispatch({type:"updateGig",gig:t})):(t.isPickedGigster=!1,t.pendingUsers=t.holdingUsers,t.holdingUsers=null,this.$store.dispatch({type:"updateGig",gig:t}))},contactGigster:function(e,t){var i=this;this.$store.dispatch({type:"contactUser",gigster:e,gigData:t,maister:this.user}).then(function(){return i.$router.push("/user/".concat(i.user._id,"/inbox"))})},getUserGigs:function(){var e=this,t=Object(Ye["a"])({},this.user.gigsIds),i=t.completed,s=t.pending,r=t.published;i.forEach(function(t){e.$store.dispatch({type:"getGigById",gigId:"".concat(t)}).then(function(t){e.gigs.completedGigs.push(t)})}),s.forEach(function(t){e.$store.dispatch({type:"getGigById",gigId:"".concat(t)}).then(function(t){e.gigs.pendingGigs.push(t)})}),r.forEach(function(t){e.$store.dispatch({type:"getGigById",gigId:"".concat(t)}).then(function(t){e.gigs.publishedGigs.push(t),console.log(e.gigs.publishedGigs)})})},openReviewForm:function(e){e.maisterId=this.user._id,this.currReviewStats=e,this.showReviewForm=!0},submitReview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={ratings:e,gigId:this.currReviewStats.gigId,createdAt:Date.now(),givenBy:{name:this.user.name.first,img:this.user.img},title:this.currReviewStats.title};this.$store.dispatch({type:"reviewAndCompleteGig",review:t,reviewStats:this.currReviewStats}),this.showReviewForm=!1,this.currReviewStats=null}},created:function(){this.loadUser()},watch:{"$route.params.userId":function(){this.loadUser()}},components:{gigAccordion:tt,pendingGig:ot,gigerReview:pt}},Ct=_t,wt=Object(g["a"])(Ct,bt,yt,!1,null,null,null);wt.options.__file="userProfile.vue";var kt=wt.exports,It=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("section",{attrs:{id:"inbox-container"}},[i("h1",[e._v(e._s(e.user.name.first)+"'s Chats")]),i("div",{staticClass:"chats-container"},[i("div",{staticClass:"top-bar"},[i("img",{attrs:{src:e.user.img}}),i("h3",[e._v(e._s(e.user.name.first)+"'s Chats")])]),i("div",{staticClass:"chats"},e._l(e.chats,function(t){return i("div",{key:t._id,staticClass:"chat",class:e.selectedChat===t?"selected":"",on:{click:function(i){e.renderChat(t)}}},[i("img",{attrs:{src:t.members[0].img}}),i("h3",[e._v("\n          "+e._s(t.members[0].name)+"\n          "),i("h5",[e._v(e._s(t.msgs[t.msgs.length-1].txt))])]),t.msgs[t.msgs.length-1].isRead?e._e():i("div",{staticClass:"new-event-point"})])}))]),i("div",{staticClass:"chat-window"},[e.selectedChat?i("div",{ref:"conversation",staticClass:"chat-conversation"},[e._l(e.selectedChat.msgs,function(t,s){return i("div",{key:t._id,class:t.sender===e.user._id?"member2":"member1"},[i("div",{ref:"msg"+s,refInFor:!0,staticClass:"chat-msg-text"},[e._v(e._s(t.txt))])])}),i("form",{on:{submit:function(t){t.preventDefault(),e.sendMsg(e.selectedChat._id)}}},[i("el-input",{attrs:{placeholder:"Type a message"},model:{value:e.newMsgTxt,callback:function(t){e.newMsgTxt=t},expression:"newMsgTxt"}}),i("button",{attrs:{type:"submit"}},[e._v("Send")])],1)],2):e._e()])]):e._e()},Gt=[],$t=(i("20d6"),{name:"inbox",data:function(){return{newMsgTxt:"",selectedChat:null,chats:[]}},computed:{user:function(){return this.$store.getters.user}},sockets:{sentMsg:function(e){var t=this.chats.find(function(t){return t._id===e.chatId});if(t.msgs.push(e.msg),this.selectedChat&&e.chatId===this.selectedChat._id){var i=this.selectedChat.msgs;i[i.length-1].isRead=!0}this.scrollDown(),this.$store.dispatch({type:"updateChat",chat:t})}},methods:{scrollDown:function(){var e=this;setTimeout(function(){var t=e.$refs.conversation;t.scrollTo(0,t.scrollHeight)},0)},renderChat:function(e){e.msgs[e.msgs.length-1].isRead=!0,e.members.length<=1&&e.members.push({name:this.user.name.first,img:this.user.img,_id:this.user._id}),this.$store.dispatch({type:"updateChat",chat:e}),this.selectedChat=e,this.scrollDown()},sendMsg:function(e){var t={sender:this.user._id,txt:this.newMsgTxt,createdAt:Date.now(),isRead:!1},i=this.selectedChat.members[0]._id;this.$store.dispatch({type:"sendNewMsg",msg:t,chatId:e}),this.$store.dispatch({type:"emitNewChatMsg",eventMsg:{txt:"You Have A New Message",type:"success",link:"/user/".concat(i,"/inbox"),action:"toProfile"},userId:i}),this.newMsgTxt=""}},created:function(){var e=this,t=this.$route.params.userId;this.$store.dispatch({type:"getUserById",userId:t}).then(function(t){return t.isInboxRead=!0,e.$store.dispatch({type:"setLoggedUser",user:t}),t.chats.forEach(function(i){return e.$store.dispatch({type:"getChatById",chatId:i.chatId}).then(function(i){if(i){var s=i.members.findIndex(function(t){return t._id===e.user._id});i=JSON.parse(JSON.stringify(i));i.members.splice(s,1);var r=i.msgs[i.msgs.length-1];r.sender===t._id&&(r.isRead=!0),e.chats.push(i)}})})})}}),Pt=$t,Ut=(i("66e8"),Object(g["a"])(Pt,It,Gt,!1,null,"09e034f1",null));Ut.options.__file="inbox.vue";var xt=Ut.exports;s["default"].use($["a"]);var Ot=new $["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:he},{path:"/gig",name:"gigs",component:Te},{path:"/gig/edit/:gigId?",name:"gigEdit",component:Ne},{path:"/gig/category/:type",name:"gigsCategories",component:Te},{path:"/gig/:gigId",name:"gigDetails",component:He},{path:"/user/login",name:"login",component:_e},{path:"/user/register",name:"register",component:$e},{path:"/user/:userId/gigs",name:"publishedGigs",component:vt},{path:"/user/:userId/inbox",name:"inbox",component:xt},{path:"/user/:userId",name:"userProfile",component:kt},{path:"/about",name:"about",component:function(){return i.e("about").then(i.bind(null,"754b"))}}]}),Lt=i("2f62"),Tt=(i("55dd"),i("bc3a")),St=i.n(Tt),Mt="/api/gig",Bt={query:Rt,getById:Et,remove:At,update:jt,getDistFromUser:Nt};function Rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{byTitle:"",byCategory:"",isActive:!0};if(console.log("qqq",e),""===e.byTitle&&""===e.byCategory){var t=new URLSearchParams;t.append("isActive",!0);var i="".concat(Mt,"?").concat(t);return console.log("gigService front",i),St.a.get(i).then(function(e){return e.data})}t=new URLSearchParams;t.append("byTitle",e.byTitle),t.set("byCategory",e.byCategory),t.set("isActive",!0),console.log("GigService front",t);var s="".concat(Mt,"?").concat(t);return St.a.get(s).then(function(e){return e.data})}function Et(e){return St.a.get("".concat(Mt,"/").concat(e)).then(function(e){return e.data})}function At(e){return St.a.delete("".concat(Mt,"/").concat(e))}function jt(e){return e._id?St.a.put("".concat(Mt,"/").concat(e._id),e).then(function(e){return e.data}):St.a.post("".concat(Mt),e).then(function(e){return e.data})}function Nt(e,t){if(t||e){var i=t.position.lat,s=t.position.lng,r=e.details.location.lat,n=e.details.location.lng,a=6371,o=d(r-i),c=d(n-s),l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(d(i))*Math.cos(d(r))*Math.sin(c/2)*Math.sin(c/2),g=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),u=a*g;return e.details.pos.dist=u.toFixed(1),e}function d(e){return e*(Math.PI/180)}}var Dt={state:{gigs:null,currGig:null,isLoading:!1,loadingCounter:0,gigCategoryCounter:null,userLocation:0},getters:{gigs:function(e){return e.gigs},isLoading:function(e){return e.isLoading},loggedUser:function(e,t){return t.user},gigCategoryCounter:function(e){return e.gigCategoryCounter}},mutations:{setGigs:function(e,t){var i=t.gigs;e.userLocation&&i.map(function(t){Bt.getDistFromUser(t,e.userLocation)}),i.sort(function(e,t){return e.details.pos.dist-t.details.pos.dist}),e.gigs=i},updateGig:function(e,t){var i=t.gig,s=e.gigs.findIndex(function(e){return e._id===i._id});e.gigs.splice(s,1,i)},toggleLoadingOn:function(e,t){0===e.loadingCounter&&(e.isLoading=!0,e.loadingCounter=1),setTimeout(function(){return e.loadingCounter=0},5e3)},toggleLoadingOff:function(e,t){e.isLoading=!1},setGigCategoryCount:function(e,t){var i=t.counter;e.gigCategoryCounter=i},setUserLocation:function(e,t){var i=t.userLocation;e.userLocation=i}},actions:{getGigs:function(e,t){var i=t.category;return Bt.query(i).then(function(t){e.commit({type:"setGigs",gigs:t});var i={};t.forEach(function(e){i[e.category]?i[e.category]++:i[e.category]=1}),e.commit({type:"setGigCategoryCount",counter:i})})},filterByKey:function(e,t){var i=t.filter;Bt.query(i).then(function(t){e.commit({type:"setGigs",gigs:t})})},toggleLoadingOn:function(e){e.commit({type:"toggleLoadingOn"})},toggleLoadingOff:function(e){e.commit({type:"toggleLoadingOff"})},getGigById:function(e,t){var i=t.gigId;return Bt.getById(i).then(function(t){return e.state.userLocation?Bt.getDistFromUser(t,e.state.userLocation):t})},removeGig:function(e,t){var i=t.gigId;return Bt.remove(i)},updateGig:function(e,t){return Bt.update(t.gig).then(function(i){return t.userGigsListToUpdate&&(t.userGigsListToUpdate.push(i._id),e.dispatch({type:"updateOwnUser",user:e.getters.loggedUser})),e.dispatch({type:"getGigs"},i),i})},userLocation:function(e,t){var i={position:{lat:t.position.coords.latitude,lng:t.position.coords.longitude}};e.commit({type:"setUserLocation",userLocation:i})},reviewAndCompleteGig:function(e,t){var i=t.review,s=t.reviewStats;return e.dispatch({type:"updateUsersReviewsAndGigIds",review:i,reviewStats:s}).then(function(){e.dispatch({type:"getGigById",gigId:s.gigId}).then(function(t){t.isActive=!1,e.dispatch({type:"updateGig",gig:t})})})}}},Ft={_toStorage:qt,_fromStorage:Kt};function qt(e,t){localStorage.setItem(e,JSON.stringify(t))}function Kt(e){var t=localStorage.getItem(e);return JSON.parse(t)}var Jt="/api",Ht={query:Wt,getById:Yt,remove:Zt,update:Vt,add:zt,getLoggedUser:Qt,loginUser:ei,logout:ti,setLocalLoggedUser:ii,getLoggedUserId:Xt};function Wt(){return St.a.get("".concat(Jt,"/user")).then(function(e){return e.data})}function zt(e){return St.a.post("".concat(Jt,"/user"),e).then(function(e){var t=e.data;return Ft._toStorage("loggedUser",t),t})}function Yt(e){return St.a.get("".concat(Jt,"/user/").concat(e)).then(function(e){return e.data})}function Vt(e){return e._id?St.a.put("".concat(Jt,"/user/").concat(e._id),e).then(function(e){return e.data}):St.a.post("".concat(Jt,"/user"),e).then(function(e){return e.data})}function Qt(){var e=Ft._fromStorage("loggedUser");return e?Promise.resolve(e):Promise.resolve(null)}function Xt(){var e=Ft._fromStorage("loggedUserId");return e?Promise.resolve(e):Promise.resolve(null)}function Zt(e){return St.a.delete("".concat(Jt,"/user/").concat(e)).then(function(e){return e.data})}function ei(e){return St.a.post("".concat(Jt,"/user/login"),e).then(function(e){var t=e.data;return Ft._toStorage("loggedUserId",t._id),Ft._toStorage("loggedUser",t),t})}function ti(){return Ft._toStorage("loggedUser",null),Ft._toStorage("loggedUserId",null),Promise.resolve()}function ii(e){Ft._toStorage("loggedUserId",e._id),Ft._toStorage("loggedUser",e)}var si={state:{loggedUser:null,isLoggedin:!1},getters:{user:function(e){return e.loggedUser},isLoggedin:function(e){return e.isLoggedin}},mutations:{setLoggedUser:function(e,t){var i=t.user;e.loggedUser=i,e.isLoggedin=!!i},updateUserGigs:function(e,t){var i=t.gig;e.loggedUser.gigsIds.published.push(i._id)}},actions:{setLoggedUser:function(e,t){var i=t.user;e.commit({type:"setLoggedUser",user:i})},checkLoggedUser:function(e){return Ht.getLoggedUser().then(function(t){t&&e.commit({type:"setLoggedUser",user:t})})},getLoggedUserId:function(e){return Ht.getLoggedUserId()},getAllUsers:function(e){return Ht.query()},getUserById:function(e,t){e.commit;var i=t.userId;return Ht.getById(i).then(function(e){return e})},updateUser:function(e,t){var i=t.user;return Ht.update(i)},updateOwnUser:function(e,t){var i=t.user;return Ht.update(i).then(function(t){Ht.setLocalLoggedUser(t),e.commit({type:"setLoggedUser",user:t})})},onLogin:function(e,t){var i=t.userCreds;return Ht.loginUser(i).then(function(t){return e.commit({type:"setLoggedUser",user:t})})},isGigOwner:function(e,t){var i=t.publisherId;return Ht.getLoggedUser().then(function(e){return e._id===i})},checkIsProfileOwner:function(e,t){var i=t.userId;return Ht.getLoggedUser().then(function(e){return e._id===i})},doLogout:function(e){var t=e.commit;return Ht.logout().then(function(){return t({type:"setLoggedUser",user:null})})},register:function(e,t){var i=t.user;return Ht.add(i).then(function(t){e.commit({type:"setLoggedUser",user:t})})},updateUsersReviewsAndGigIds:function(e,t){var i=t.review,s=t.reviewStats;return e.dispatch({type:"removeGigFromAllUsers",gigId:s.gigId}).then(function(){e.dispatch({type:"getUserById",userId:s.gigsterId}).then(function(t){"0"===t.reviews.completed[0].gigId?t.reviews.completed=[i]:t.reviews.completed.unshift(i),e.dispatch({type:"updateUser",user:t})})})},removeGigFromAllUsers:function(e,t){var i=t.gigId;e.dispatch({type:"getGigById",gigId:i}).then(function(t){return e.dispatch({type:"getUserById",userId:t.publisherId}).then(function(i){i.gigsIds.completed.push(t._id);var s=i.gigsIds.published.findIndex(function(e){return e===t._id});s>-1&&i.gigsIds.published.splice(s,1),e.dispatch({type:"updateOwnUser",user:i})}),t.holdingUsers?t.holdingUsers.forEach(function(i){e.dispatch({type:"getUserById",userId:i.id}).then(function(i){var s=i.gigsIds.pending.findIndex(function(e){return e===t._id});s>-1&&(i.gigsIds.pending.splice(s,1),e.dispatch({type:"updateUser",user:i}))})}):t.pendingUsers.forEach(function(i){e.dispatch({type:"getUserById",userId:i.id}).then(function(i){var s=i.gigsIds.pending.findIndex(function(e){return e===t._id});s>-1&&(i.gigsIds.pending.splice(s,1),e.dispatch({type:"updateUser",user:i}))})})})},deletePendingUsers:function(e,t){var i=t.gigId;Ht.query(i).then(function(e){e.map(function(e){return e.gigsIds.published===i}),console.log(e)})}}},ri="/api/chat",ni={query:ai,getById:ci,remove:gi,update:li,add:oi};function ai(){return St.a.get(ri).then(function(e){return e.data})}function oi(e){return St.a.post(ri,e).then(function(e){var t=e.data;return t})}function ci(e){return St.a.get("".concat(ri,"/").concat(e)).then(function(e){return e.data})}function li(e){return e._id?St.a.put("".concat(ri,"/").concat(e._id),e).then(function(e){return e.data}):St.a.post(ri,e).then(function(e){return e.data})}function gi(e){return St.a.delete("".concat(ri,"/").concat(e)).then(function(e){return e.data})}i("3022");var ui={state:{},getters:{},mutations:{},actions:{sendNewMsg:function(e,t){var i=t.msg,s=t.chatId;this._vm.$socket.emit("sendMsg",i,s)},getChatById:function(e,t){var i=t.chatId;return ni.getById(i)},contactUser:function(e,t){var i=t.gigster,s=t.gigData,r=t.maister,n=r.chats.findIndex(function(e){return e.maisterId===r._id&&e.gigsterId===i.id||e.gigsterId===r._id&&e.maisterId===i.id});if(n>=0){var a=r.chats.splice(n,1);return a=a[0],r.chats.unshift(a),e.dispatch({type:"updateOwnUser",user:r})}return e.dispatch({type:"openNewChat",gigster:i,gigData:s,maister:r})},updateChat:function(e,t){var i=t.chat;return ni.update(i)},openNewChat:function(e,t){var i=t.gigster,s=t.gigData,r=t.maister,n={members:[{name:i.name,img:i.img,_id:i.id},{name:r.name.first,img:r.img,_id:r._id}],msgs:[{sender:"Team",txt:"Welcome ".concat(r.name," and ").concat(i.name,", you can now chat and set your gig!"),isRead:!0,createdAt:Date.now()}],gig:s};return ni.update(n).then(function(t){var s={chatId:t._id,gigsterId:i.id,maisterId:r._id};function n(e){return e.chats.unshift(s),e}e.dispatch({type:"getUserById",userId:i.id}).then(function(t){var i=n(t);e.dispatch({type:"updateUser",user:i})});var a=n(r);return e.dispatch({type:"updateOwnUser",user:a})})}}},di={state:{loggedUser:null,isLoggedin:!1},getters:{},mutations:{},actions:{openUserSocket:function(e){var t=this;e.dispatch("getLoggedUserId").then(function(e){t._vm.$socket.emit("newUserSocket",e)})},emitToUser:function(e,t){var i=t.eventMsg,s=t.userId;this._vm.$socket.emit("emitToUser",i,s)},emitNewChatMsg:function(e,t){var i=t.eventMsg,s=t.userId;this._vm.$socket.emit("emitNewChatMsg",i,s)}}};s["default"].use(Lt["a"]);var pi=new Lt["a"].Store({state:{},getters:{},mutations:{},actions:{},modules:{gigModule:Dt,userModule:si,chatModule:ui,socketModule:di}}),hi=i("5132"),fi=i.n(hi),mi=(i("b107"),i("5c96")),vi=i.n(mi),bi=(i("0fae"),i("b2d6")),yi=i.n(bi),_i=i("755e");St.a.defaults.withCredentials=!0;var Ci="";s["default"].use(_i,{load:{key:"AIzaSyD4xBjgA3NAoLiVoJmSwJCYUel6lc17HOM",libraries:"places"}}),s["default"].use(new fi.a({debug:!0,connection:Ci,vuex:{store:pi,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),s["default"].use(vi.a,{locale:yi.a}),s["default"].config.productionTip=!1,new s["default"]({router:Ot,store:pi,VueGoogleMaps:_i,render:function(e){return e(G)}}).$mount("#app")},"5e5e":function(e,t,i){"use strict";var s=i("2a52"),r=i.n(s);r.a},6294:function(e,t,i){"use strict";var s=i("7fba"),r=i.n(s);r.a},"64ad":function(e,t,i){"use strict";var s=i("b31a"),r=i.n(s);r.a},"66c0":function(e,t,i){"use strict";var s=i("c0c8"),r=i.n(s);r.a},"66e8":function(e,t,i){"use strict";var s=i("960d"),r=i.n(s);r.a},"68ef":function(e,t,i){"use strict";var s=i("b1ad"),r=i.n(s);r.a},"6a0e":function(e,t,i){"use strict";var s=i("29c5"),r=i.n(s);r.a},"7fba":function(e,t,i){},8190:function(e,t,i){"use strict";var s=i("4b6d"),r=i.n(s);r.a},8556:function(e,t,i){},"8e46":function(e,t,i){},"8ff6":function(e,t,i){"use strict";var s=i("0b18"),r=i.n(s);r.a},"922e":function(e,t,i){},"960d":function(e,t,i){},"99fc":function(e,t,i){"use strict";var s=i("4939"),r=i.n(s);r.a},a67c:function(e,t,i){},afaf:function(e,t,i){},b107:function(e,t,i){},b1ad:function(e,t,i){},b31a:function(e,t,i){},b764:function(e,t,i){},bd0f:function(e,t,i){},c0c8:function(e,t,i){},d005:function(e,t,i){"use strict";var s=i("922e"),r=i.n(s);r.a},d86b:function(e,t,i){},dda1:function(e,t,i){"use strict";var s=i("8e46"),r=i.n(s);r.a},e134:function(e,t,i){"use strict";var s=i("a67c"),r=i.n(s);r.a}});
//# sourceMappingURL=app.8ed571a7.js.map